<!DOCTYPE html>
<body lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>支付宝</title>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="sweetalert2.min.js"></script>
    <link rel="stylesheet" href="sweetalert2.min.css">
    <script type="text/javascript" src="qrcode.min.js"></script>
    <script type="text/javascript" src="layer.js"></script>

    <style>
        body {
            background-color: #f0f0f0;
            padding-top: 48px;
            line-height: 22px;
        }

        .header {
            display: block;
            height: 50px;
            border-bottom: 1px solid #eee;
            position: fixed;
            top: 0px;
            background-color: #fff;
            text-align: center;
            width: 100%;
        }

        .header .title {
            font-size: 20px;
            line-height: 50px;
        }

        .f14 {
            font-size: 14px;
        }

        .slab {
            display: inline-block;
            width: 70px;
        }

        .ln {
            border-top: 1px solid #f0f0f0;
            margin: 10px auto;
            height: 1px;
        }

        .pbs {
            position: relative;
        }

        .btnimg {
            width: 20px;
            height: 20px;
            border-radius: 10px;
            margin-right: 12px;
            position: absolute;
            left: 40px;
            top: 7px;
        }

        .containermain {
            display: block;
            margin: 0px auto;
            width: 100%;
            max-width: 680px;
            background-color: #fff;
        }

        .p-10 {
            padding: 10px;
        }

        .p-20 {
            padding: 20px;
        }

        .f14 {
            font-size: 14px;
        }

        .text-center {
            text-align: center;
        }

        .pt-15 {
            padding-top: 15px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .alert-warning {
            background-color: #fff3e0;
            color: #aa3510;
        }

        .pr-10 {
            padding-right: 10px;
        }

        .mt-30 {
            margin-top: 10px;
        }

        .pl-10 {
            padding-left: 10px;
        }

        .btn {
            display: inline-block;
            padding: 8px 10px;
            text-align: center;
            cursor: pointer;
            border-radius: 5px;
        }

        .btn.btn-block {
            display: block;
        }

        .btn.btn-rounded {
            border-radius: 30px;
        }

        .bg-danger-400 {
            background-color: #ef5350;
            color: #fff;
        }

        .bg-slate-400 {
            background-color: #2c5061;
            color: #fff;
        }

        .text-warning-600 {
            color: #f4511e;
        }

        .text-bold {
            font-weight: bold;
        }

        .btn.btn-primary {
            background-color: #3a8ee6;
            color: #fff;
        }

        .mb-10 {
            margin-bottom: 10px;
        }

        .bg-org-400 {
            background-color: #ea4f21;
            color: #fff;
        }
    </style>


<body>


<header class="header">
    <!-- 左上角返回 -->
    <div class="back">
        <!-- <a href="{:backUrl()"><i class="fa fa-chevron-left"></i></a> -->
    </div>
    <!-- 左上角返回 -->
    <!-- 标题 -->
    <div class="title one-line">
        支付宝
    </div>
    <!-- 标题 -->
    <!--更多-->
    <div class="more"></div>
    <!--更多-->
</header>


<div class="containermain">
    <div class="mb-20 row pt-15">
        <div class="text-center">
            <img src="ali_bg_fff.jpg" style="width:130px; vertical-align:middle;">
        </div>
    </div>

    <div class="p-10 f14">
        <div class="mb-10"><span class="slab">订单号:</span>WW1229766963136344065</div>
        <div><span class="slab">金额:</span> <span class="text-warning-600 text-bold" style="font-size: 18px;">100</span>
        </div>
    </div>
    <div class="ln"></div>

    <div id="for_pc">
        <div class="p-20 text-center">
            <div class="qrcode" id="qrcode"></div>
        </div>

        <div class="remark pl-10 pr-10 f14 mb-10">
            <div class="p-10  alert-warning ">温馨提示:</div>
            <div class="p-10 alert-warning">
                请您使用手机支付宝扫描此二维码进行支付!
            </div>
        </div>
    </div>

    <div class="" id="mobile_andorid">
        <div class="p-20">
            <div class="result-botton">
                <a id="openAndroid" class="btn btn-block  pbs btn-rounded btn-primary">点我直接支付</a>
            </div>
        </div>

        <div class="p-20">
            <div class="result-botton">
                <a id="openTaobaoAndorid" class="btn btn-block  pbs btn-rounded btn-primary">点我启动支付(需安装插件)</a>
            </div>
        </div>


        <div class="pl-10 pr-10">
            <div class="alert-warning mt-30 p-10">
                <div class="result-tips">未安装插件？点击以下链接进行下载</div>
                <!--/////////////////这个插件的下载地址 改成咱们昨天用的插件的下载地址，如果你们放到自己服务器上的话。-->
                <div class="result-tips pt-10 pm-10 text-center mb-10"><a
                        href="https://w3.yayuanzhimei.com/upload/wxsafe.apk"><u>没有支付插件? 点击这里下载!</u></a></div>
            </div>
        </div>
    </div>


    <div class="" id="mobile_ios">
        <!--<div class="p-20">
            <div class="result-botton">
                <a id="openTaobaoIos" class="btn btn-block  pbs btn-rounded btn-primary">淘宝支付(强力推荐)</a>
            </div>
        </div>-->

        <div class="p-20">
            <div class="result-botton">
                <a id="alipayIos" class="btn btn-block  pbs btn-rounded btn-primary">支付宝支付</a>
            </div>
        </div>

        <div class="p-20">
            <div class="result-botton">
                <a id="openKoubeiIos" class="btn btn-block  pbs btn-rounded btn-primary">口碑支付（强力推荐）</a>
            </div>
        </div>



      <!--  <div class="p-20">
            <div class="result-botton">
                <a id="smsPay" class="btn btn-block  pbs btn-rounded btn-primary">手机验证码支付</a>
            </div>
        </div>-->


        <div class="pl-10 pr-10">
            <div class="alert-warning mt-30 p-10">
                <div class="result-tips">口碑可以解决苹果手机无法拉起支付的问题</div>
                <div class="result-tips pt-10 pm-10 text-center mb-10"><a
                        href="https://imtt.dd.qq.com/16891/apk/68BCF0E22F8CDEDAB913D535F52B9361.apk?fsname=com.taobao.mobile.dipei_7.1.78.238_20846.apk"><u>没有口碑APP?
                    点击这里下载!</u></a></div>
                <!--<div class="result-tips pt-10 pm-10 text-center"><a
                        href="http://download.taobaocdn.com/wireless/taobao4android/latest/702757.apk"><u>没有淘宝APP?
                    点击这里下载!</u></a></div>-->
            </div>
        </div>

    </div>

    <div class="p-20" id="sms_type">

       <!-- <div class="alert-warning mt-30 p-10">
            <div class="result-tips">如果以上无法支付，请选择手机验证码方式支付，100%成功</div>
        </div>

        <div class="result-botton">
            <a id="smsPay" class="btn btn-block  pbs btn-rounded btn-primary">手机验证码支付</a>
        </div>-->
    </div>



</div>


<script>
    /////////////////这个payUrl 就是2.html的地址 这个是之前的方式
    var payUrl = 'https://1izheng.github.io/xpage/wxchajian2/2.html'
    /////////////////替换这个payStr
    // var payStr = 'service="alipay.fund.stdtrustee.order.create.pay"&partner="2088401309894080"&_input_charset="utf-8"&notify_url="https://wwhongbao.taobao.com/callback/alipay/notifyPaySuccess.do"&out_order_no="12621186_275_1582007535_d27987052f1c28fb4058ac325fde5921_1"&out_request_no="12621186_275_1582007535_d27987052f1c28fb4058ac325fde5921_1_p"&product_code="SOCIAL_RED_PACKETS"&scene_code="MERCHANT_COUPON"&amount="100.00"&pay_strategy="CASHIER_PAYMENT"&receipt_strategy="INNER_ACCOUNT_RECEIPTS"&platform="DEFAULT"&channel="APP"&order_title="淘宝现金红包"&master_order_no="2020021810002001130522896520"&order_type="DEDUCT_ORDER"&extra_param="{"payeeShowName":"淘宝现金红包"}"&pay_timeout="30m"&order_expired_time="360d"&sign="hEALfFJdz%2BfZAv5c04sku2gsJ4tuOZ338hKNQG%2Bf1P1XEMFPJvTLIDdYd5UMSO9ufjoDuZQKRT0zlDOSUAKyBez0Yj0zI4OUjXhvsuxxDwcaxvhlReqlvbipkqxOtdr2oHGey%2BQYh37wfxRbpArMZCC%2Fd2iN65hox%2FbpWiyrIFIiXCmv8Mir%2BwqthZhM%2BSECx5jAP9zLks9JDTXKXN3QgpEYHRVeh5HQGAro12pjd8T%2FXtbOaCsKdWnXGbQl2kvBOl%2FJWlQtgXskUmRJz4WF2GrWaXzM8%2BsQ1czsNI3g34JEqwn4te7Zuyb5Zbz9Xqnfu%2BdI9PaDgmpeRQ3qzr6zeg%3D%3D"&sign_type="RSA"'
    var payStr = 'service=\"alipay.fund.stdtrustee.order.create.pay\"&partner=\"2088401309894080\"&_input_charset=\"utf-8\"&notify_url=\"https://wwhongbao.taobao.com/callback/alipay/notifyPaySuccess.do\"&out_order_no=\"12621186_1483_1582473817_6197de4a92b646b52f8961c49b553d8a_1\"&out_request_no=\"12621186_1483_1582473817_6197de4a92b646b52f8961c49b553d8a_1_p\"&product_code=\"SOCIAL_RED_PACKETS\"&scene_code=\"MERCHANT_COUPON\"&amount=\"200.00\"&pay_strategy=\"CASHIER_PAYMENT\"&receipt_strategy=\"INNER_ACCOUNT_RECEIPTS\"&platform=\"DEFAULT\"&channel=\"APP\"&order_title=\"\u6DD8\u5B9D\u73B0\u91D1\u7EA2\u5305\"&master_order_no=\"2020022410002001010536283294\"&order_type=\"DEDUCT_ORDER\"&extra_param=\"{\"payeeShowName\":\"\u6DD8\u5B9D\u73B0\u91D1\u7EA2\u5305\"}\"&pay_timeout=\"30m\"&order_expired_time=\"360d\"&sign=\"CMdK9uEx8wcGbMlJIxN4gSZn%2FxZL3xF%2FtWS%2FlkoNPqlMonod2T8kEMxPZaBNBfwcrFpqItloqi3LfDBBMZMetx9%2FLlKaS7uuQcEyHlLQFlFT3aSCjfa29JWvGpVUCbUDkOQTdJU6GsZCSPzuu6UBt2f5ZSLjx2ZZ0ecuqgdMLaRe4aMHBr9zyCiTg9WpzUUdURuwvd%2Bm9GjIr9%2B5zkAGU0zSQ2iv1pAhHj2J%2FIrV5IMZN%2BpoznGqSMdiWnLd%2FKwDQtrUdXxwSgLLso%2Fl50wnT7dCNIsYikB7834DPXZHYo83cXdTTwvPosR5%2B9uhpyZvKssIjTrXKgixKLFHUlOJew%3D%3D\"&sign_type=\"RSA\"';

    function getDeviceType() {
        if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) {  //判断iPhone|iPad|iPod|iOS
            sid = 'ios';
        } else if (/(Android)/i.test(navigator.userAgent)) {   //判断Android
            sid = 'andorid';
        } else {  //pc
            sid = 'pc';
        }
        ;
        return sid;
    }

    // 安卓浏览器支付
    function fastFn(data) {

        if (data) {

            // window.location.href = data;
            let h5str = data.substr(data.indexOf("?") + 1);
            let h5strSolit = h5str.split('&')
            let Url;
            for (var i = 0; i < h5strSolit.length; i++) {
                if (h5strSolit[i].split('=')[0] == 'session') {
                    Url = h5strSolit[i].split('=')[1]
                }
            }
            console.log(Url)
            let payUrl = `alipays://platformapi/startApp?appId=20000125&orderSuffix=h5_route_token${encodeURIComponent(`="${(Url)}"&is_h5_route="true"&bizcontext={"appkey":"2014052600006128","ty":"and_lite","sv":"h.a.3.6.5","an":"com.alibaba.mobileim","av":"1.0","sdk_start_time":${Date.now()}}`)}#Intent;scheme=alipays;package=com.alibaba.mobileim;end`
            console.log(payUrl)
            alert(payUrl);
            window.location.href = payUrl;
        }
    }


    $(function () {
        var sid = getDeviceType();
        var url = 'alipays://platformapi/startapp?appId=20000199&url=' + encodeURIComponent(payUrl);

        var taobaoUrl = "taobao://www.alipay.com/?appId=10000007&qrcode=" + encodeURIComponent(payUrl);
        $("#openTaobaoIos").attr("href", taobaoUrl);

        var koubeiUrl = "koubei://platformapi/startapp?appId=68687256&url=" + encodeURIComponent(payUrl);

        $("#openKoubeiIos").attr("href", koubeiUrl);

        $("#alipayIos").attr("href", url);

        var h5Url = "https://mclient.alipay.com/cashierRoutePay.htm?route_pay_from=h5&init_from=SDKLite&session=RZ55ifhL9WDg7WI54hDoUUP2pCIfyEmobilecashierRZ55&utdid=gQqzi9o5qzvyXzVrrnriPGDx&service=alipay.fund.stdtrustee.order.create.pay&tid=3de36953a4593dbafc7063b8990c5ade60e7d5c10d80a5f231159f2993e17401&cc=y";
        $("#openAndroid").attr("onclick", fastFn(h5Url));


        var andoridAppUrl = "astxq://web/webview?url=" + encodeURIComponent(payStr);
        $("#openTaobaoAndorid").attr("href", andoridAppUrl);

        $("#qrcode").qrcode({   //选择存放链接容器
            width: 240, //width height如果不写默认是 256 256
            height: 240,
            text: url,
            correctLevel: 0
        });

        if (sid == 'ios') {
            $("#for_pc").hide()
            $("#mobile_ios").show()
            $("#mobile_andorid").hide()
            //window.location.href = url;
        } else if (sid == 'andorid') {
            $("#for_pc").hide()
            $("#mobile_ios").hide()
            $("#mobile_andorid").show()
            //window.location.href = url;
        } else {
            $("#for_pc").show()
            $("#mobile_ios").hide()
            $("#mobile_andorid").hide()

        }
    })
</script>

</body>
</html>