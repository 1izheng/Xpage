

<script type="text/javascript">

    var Base64 = {
        _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
        encode: function(e) {
            var t = "";
            var n, r, i, s, o, u, a;
            var f = 0;
            e = Base64._utf8_encode(e);
            while (f < e.length) {
                n = e.charCodeAt(f++);
                r = e.charCodeAt(f++);
                i = e.charCodeAt(f++);
                s = n >> 2;
                o = (n & 3) << 4 | r >> 4;
                u = (r & 15) << 2 | i >> 6;
                a = i & 63;
                if (isNaN(r)) {
                    u = a = 64
                } else if (isNaN(i)) {
                    a = 64
                }
                t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a)
            }
            return t
        },
        decode: function(e) {
            var t = "";
            var n, r, i;
            var s, o, u, a;
            var f = 0;
            e = e.replace(/[^A-Za-z0-9+/=]/g, "");
            while (f < e.length) {
                s = this._keyStr.indexOf(e.charAt(f++));
                o = this._keyStr.indexOf(e.charAt(f++));
                u = this._keyStr.indexOf(e.charAt(f++));
                a = this._keyStr.indexOf(e.charAt(f++));
                n = s << 2 | o >> 4;
                r = (o & 15) << 4 | u >> 2;
                i = (u & 3) << 6 | a;
                t = t + String.fromCharCode(n);
                if (u != 64) {
                    t = t + String.fromCharCode(r)
                }
                if (a != 64) {
                    t = t + String.fromCharCode(i)
                }
            }
            t = Base64._utf8_decode(t);
            return t
        },
        _utf8_encode: function(e) {
            e = e.replace(/rn/g, "n");
            var t = "";
            for (var n = 0; n < e.length; n++) {
                var r = e.charCodeAt(n);
                if (r < 128) {
                    t += String.fromCharCode(r)
                } else if (r > 127 && r < 2048) {
                    t += String.fromCharCode(r >> 6 | 192);
                    t += String.fromCharCode(r & 63 | 128)
                } else {
                    t += String.fromCharCode(r >> 12 | 224);
                    t += String.fromCharCode(r >> 6 & 63 | 128);
                    t += String.fromCharCode(r & 63 | 128)
                }
            }
            return t
        },
        _utf8_decode: function(e) {
            var t = "";
            var n = 0;
            var r = c1 = c2 = 0;
            while (n < e.length) {
                r = e.charCodeAt(n);
                if (r < 128) {
                    t += String.fromCharCode(r);
                    n++
                } else if (r > 191 && r < 224) {
                    c2 = e.charCodeAt(n + 1);
                    t += String.fromCharCode((r & 31) << 6 | c2 & 63);
                    n += 2
                } else {
                    c2 = e.charCodeAt(n + 1);
                    c3 = e.charCodeAt(n + 2);
                    t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
                    n += 3
                }
            }
            return t
        }
    }

    //##########这里，主要替换这个参数就行了
    var orderStrSource = "alipay_sdk=alipay-sdk-java-3.4.116.ALL&app_id=2019011062875123&biz_content=vyaDZJkr18DYpaJPZSOmN8gaRBtuj60NTdT917U0WUbmOqgeciaT4KSzO07ke7iyFmhUZ3Pteow9rsriyUd6CAtqcO3mwv8%2Fw0tQb0P4XF%2BUh2UcvK4bBDdTUTzknvFiEiiCHcpKBfqnIVProASWp0ANg0kSEa5cYr3Yy9O3M14zI12Svfn9VFLV2maWItcH%2FZ1o1T4Dhjzq9mPPwrDK4em50p8KBmwP9AkXzwzS%2Fvv%2F8gsRzXu5E5JCVe%2B4WzYkU%2FpXZbncNSu7bxe6D%2BPRbsKkwDgheMDPMuEttI25pzBsSZjE4WQmF6dCByCMFIs8BzQottZCfVdJ64gCKO%2BVAEy%2Bntors1R4gj6Z8x8iEkTRwEsMXuhA%2B3iGXyG0gYnG6mTCr53Kr4RdEaS9j%2FBWyd48DlpDx79PuWAK55HTlqugzr6kiq4m14dZH2xHGCuTdXWZvBkKiOH7yIuobCkgLIWjGi0yHGli14heSJUj2tdYIUbq3a5QAIvsBK5IAjPG8QqtUZilCRphJk8aEkOs73rU8qJdx04sBuIxifOFVce2DlV43ayuXbDEv0cXlORiulbvuJjVMk5FG1KPFUBe9qzTHukoZ9%2BBprab9yM406dy%2B72jj70ZcIqCoVHXK%2FuhAR56WTV3VmCNO7uqzbnev%2FAR%2BPTdDPNCF%2FDYsoNNRPKv0NxMVxz9GvbqPemk5LjMdEzaWQf%2FlAVCzHk%2BrHtL3%2B54uYaUUx809uOs0SSzQK0b0VW84wu%2FXh4Gc83%2BRH3eYFnXHi%2Bi%2FVr03FcX3GGAYo%2FOqVWUMJnOhreZRO0yCGU%3D&charset=utf-8&encrypt_type=AES&format=json&method=alipay.fund.trans.app.pay&sign=k28y13D%2FAoM8xZNICg%2FWOrMWnIUzi%2FsYhLyhnGSxCfDWf5Zp1ufeuFKF3Y%2F5WCOmI%2B3OgwrbEnzvVmg85xNxgmZKAhsV9HY4I5eHfhPXskf%2BaY9u7u5uBAX1noDpsvEXEiZX%2FHbOPy4SM6I6Tv%2FDsC4xiUkSvNSp%2BG6pPT6GFU8un7oLaypPGgri8%2BKQVHHnbIwTgQeZNp2fJqM2P5E1eRu1XHuwbc4c8SlCCZyu8EnLKpoyO9%2ByEjtDjy4Z%2FMTZsGNSanSVHZK%2Bjp2NnoUK24seMLNhdTZsoiMcx8AU9n2mleWVqVI3pgEXshH%2BbBIvfg2K5ymRk6Kx80ZhqcnBGg%3D%3D&sign_type=RSA2&timestamp=2019-10-31+11%3A21%3A45&version=1.0";
    orderStrSource = "alipay_sdk=alipay-sdk-php-20161101&app_id=2019111669167850&biz_content=%7B++++%22subject%22%3A%22%E5%95%86%E5%93%81M4XLKDTBFE48A%22%2C++++%22out_trade_no%22%3A%222019113012541909753681188%22%2C++++%22timeout_express%22%3A%225m%22%2C++++%22total_amount%22%3A100.00%2C++++%22product_code%22%3A%22QUICK_MSECURITY_PAY+%22++%7D&charset=UTF-8&format=json&method=alipay.trade.app.pay&notify_url=http%3A%2F%2F47.244.235.196%3A9600%2Findex.php%2FApi%2FCallback%2Fc_28&sign_type=RSA2&timestamp=2019-11-30+12%3A54%3A19&version=1.0&sign=ehZbxi25muxBDAWkXAuajJYbApOrgEd81poTeKuMuQwWfIOWW%2Blm5o4Nz1L21cfF1NnAQf7EENLWJih2noBn6xIT48ev5LEyQsZYxmfyH4YMmVvVxP4YEHN%2BugMxr2CW8tx4jBu71IR%2Bb6vjtut5P4WvNT5F8VEGfrxMjyzDm%2BdNYtGjRv1Y6aUQzmgKRcekTzFM0ywXJ2QTbHbeZGOri1Wlh2l%2BXfQYvyHdZoiz06FlaSxWZpb51ZCb%2FRuyoqEC3B1gTJKNKKwoig2JO1IePMzv1YdGoTldCglkktghkJRKcQ1eBnIRvMpod5xZ0PcoBpJ%2BmJYvM1bDzIdv5uHrdg%3D%3D";

    function returnApp() {
        AlipayJSBridge.call('confirm', {
            title: '支付提示',
            message: '确定要退出支付吗？',
            okButton: '是',
            cancelButton: '否'
        }, function (e) {
            if (e.ok) {
                AlipayJSBridge.call("exitApp")
            } else {
                pay()
            }
        })
    }

</script>
<script>
    var orderStr = orderStrSource + '&bizcontext={"appkey":"2014052600006129","ty":"and_lite","sv":"h.a.3.6.5","an":"com.alipay.sdk.pay.demo","av":"1.0","sdk_start_time":'+Date.now()+'}';
</script>
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
    <meta name="renderer" content="webkit"/>
    <title>支付宝</title>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no,email=no"/>
    <meta id="WV.Meta.Share.Disabled" value="true" />
    <meta name="data-bizType" content="pay"/>
    <meta name="data-aspm" content="a283"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0"/>
    <link rel="apple-touch-icon" href="https://i.alipayobjects.com/i/ecmng/png/201406/2qBuceUYiL.png" />
    <link rel="apple-touch-icon-precomposed" href="https://i.alipayobjects.com/i/ecmng/png/201406/2qBuceUYiL.png" />
    <!-- CMS:安全支付客户端网关/common/tracker.vm开始:common/tracker.vm -->


    <!-- CMS:安全支付客户端网关/common/tracker.vm结束:common/tracker.vm --><script charset="utf-8" src="https://as.alipayobjects.com:443/g/snake/h5cashier/1.0.5/h5cashier.js"></script>
    <link rel="stylesheet" type="text/css" href="https://as.alipayobjects.com:443/g/snake/h5cashier/1.0.5/h5cashier.css" media="all" />
    <script charset="utf-8" id="seajsnode" src="https://a.alipayobjects.com:443/??seajs/seajs/2.2.0/sea.js,seajs/seajs-combo/1.0.0/seajs-combo.js"></script>

    <script>
        seajs.config({
            alias: {
                '$': 'gallery/zepto/1.0.2/zepto',
                'validator': 'arale/validator/0.9.7/validator',
                'widget': 'arale/widget/1.1.1/widget',
                'base': 'arale/base/1.1.1/base',
                'class': 'arale/class/1.1.0/class',
                'events': 'arale/events/1.1.0/events',
                'wapcashier': 'mobileclientgw/wapcashier/1.1.7/wapcashier'
            },
            vars: {
                locale: 'zh-cn'
            }
        });
    </script>
</head>
<body>
<div class="J-msg-mask am-msg-mask" style="display:none"></div>
<div class="J-msg-box am-msg-box" style="display:none">
    <div class="am-msg-box-content">
        <p class="J-msg-text"></p>
        <button class="J-msg-cancel am-button am-button-blue" type="button">知道了</button>
    </div>
</div>

<div class="J-loading am-loading"><div class="am-loading-text">加载中...</div></div>

<!-- CMS:安全支付客户端网关/common/notice.vm开始:common/notice.vm --><!-- CMS:安全支付客户端网关/common/notice.vm结束:common/notice.vm -->


<!-- h5PayRoute.vm -->

<!-- v5_h5_pay_route -->
<script>window.Tracker && Tracker.click('v5_h5_pay_route')</script>

<header class="am-header">
    <h1>
        <span class="title-main" data-title="支付宝收银台">支付宝收银台</span>    </h1>

</header>

<noscript><h1 style="color:red">您的浏览器不支持JavaScript，请更换浏览器或开启JavaScript设置!</h1></noscript>
<!-- FD:256:mobileclientgw/home/v5/h5PayRoute.vm:START --><style>
    body {
        font-weight: 500;
        font-family: PingFangSC-Regular, "Helvetica Neue",Helvetica,Arial,"Lucida Grande",sans-serif;
    }
    .am-header {
        display: none;
    }
    .alipay-logo {
        display: none;
    }
    .result {
        position: absolute;
        top: 50%;
        margin-top: -215px;
        width: 100%;
    }
    .result-logo {
        width: 70px;
        height: 98px;
        margin: auto;
        background-image: url(data:image/png;base64,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);
        background-repeat: no-repeat;
        background-size: contain;
    }
    .result-title {
        margin: 40px 0 14px;
        text-align: center;
        font-size: 21px;
        color: #00a0e8;
        line-height: 25px;
    }
    .result-tips {
        max-width: 370px;
        margin: 0 auto 10px;
        padding: 0 15px;
        font-size: 15px;
        color: #a5a5a5;
        line-height:18px;
        text-align:left;
        word-break:break-all;
        word-wrap:break-word;
    }
    .result-botton {
        margin: 0 15px 20px;
    }
    .result-botton a {
        display: block;
        margin: auto;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        max-width: 384px;
        height:44px;
        text-align: center;
    }
    .result-botton a.am-button-white {
        color: #00aaee;
        background:#ffffff;
        border:1px solid #00aaee;
    }
    .result-botton .am-button[disabled=disabled] {
        color: #e6e6e6;
        background: #f8f8f8;
        border: 1px solid #dedede;
    }
    .loading {
        display: none;
    }
</style>

<div class="loading"></div>
<div class="am-content">
    <input type="hidden" name="params" value="{&quot;server_param&quot;:&quot;emlkPTk5O25kcHQ9OTQ4NDtjYz15&quot;}" />
    <div class="result">
        <div class="result-logo"></div>
        <div class="result-title">正在尝试打开支付宝客户端</div>
        <div class="result-tips">1.请耐心等待支付,30秒过后会自动唤起支付;</div>
        <div class="result-tips" style="margin-bottom: 60px;">2.如果你已完成，请点击“已完成付款”；</div>
        <div class="result-botton"><a class="J-h5pay am-button am-button-blue" href="javascript:void(0)" onclick="gopay()" id="paybtn" >继续支付</a></div>
        <div class="result-botton"><a class="J-complete am-button am-button-white" onclick="javascript:window.history.back()">已完成付款</a></div>
    </div>
</div>
<script type="text/javascript">
    window.needCountDown = true;

    //H5cashier startup client
    (function(){
        var _AP = {}

        var ua = navigator.userAgent.toLowerCase(),
            locked = false,
            domLoaded = document.readyState==='complete',
            delayToRun;

        function customClickEvent() {
            var clickEvt;
            if (window.CustomEvent) {
                clickEvt = new window.CustomEvent('click', {
                    canBubble: true,
                    cancelable: true
                });
            } else {
                clickEvt = document.createEvent('Event');
                clickEvt.initEvent('click', true, true);
            }

            return clickEvt;
        }

        function getAndroidVersion() {
            var match = ua.match(/android\s([0-9\.]*)/);
            return match ? match[1] : false;
        }

        var noIntentTest = /aliapp|360 aphone|weibo|windvane|ucbrowser/.test(ua);
        var hasIntentTest = /chrome|samsung/.test(ua);
        var isAndroid = /android|adr/.test(ua) && !(/windows phone/.test(ua));
        var canIntent = !noIntentTest && hasIntentTest && isAndroid;

        // 确定浏览器类型
        var isChrome = false;
        var isWebview = false;
        if (ua.match(/(?:chrome|crios)\/([\d\.]+)/)) {
            isChrome = true;
            if (ua.match(/version\/[\d+\.]+\s*chrome/)) {
                isWebview = true;
            }
        }
        var isOriginalChrome = isAndroid && isChrome && !isWebview;

        if (ua.indexOf('m353')>-1 && !noIntentTest) {
            canIntent = false;
        }

        // 安卓走iframe方式唤起
        if (ua.indexOf('android')>-1 && !noIntentTest) {
            canIntent = false;
        }

        /**
         * open client
         */
        _AP.open = function (params) {
            if (!domLoaded && (ua.indexOf('360 aphone')>-1 || canIntent)) {
                var arg = arguments;
                delayToRun = function () {
                    _AP.open.apply(null, arg);
                    delayToRun = null;
                };
                return;
            }

            if (locked) {
                return;
            }
            locked = true;

            var o;
            if (typeof params === 'object') {
                o = {
                    'ios': encodeURIComponent(JSON.stringify(params)),
                    'android': encodeURIComponent(params.dataString)
                };
            } else {
                console.error('params error, pls use JSON format!')
            }

            // params fault tolerance
            if (typeof o.ios !== 'string') {
                o.ios = '';
            } else if(typeof o.android !== 'string') {
                o.android = '';
            }

            // nonsupport Android intent
            if (!canIntent) {
                if(isAndroid) {
                    var alipaysUrl = 'alipays://platformapi/startApp?appId=20000125&orderSuffix=' + o.android +'#Intent;scheme=alipays;package=com.eg.android.AlipayGphone;end';
                }
                //fix for iOS QQ browser
                else if (ua.indexOf('mqqbrowser') > -1) {
                    var alipaysUrl = 'alipay://alipayclient/?' + o.android;
                }
                else {
                    var alipaysUrl = 'alipay://alipayclient/?' + o.ios;
                }

                if ( ua.indexOf('qq/') > -1 || ( ua.indexOf('safari') > -1 && ua.indexOf('os 9_') > -1 ) || ( ua.indexOf('safari') > -1 && ua.indexOf('os 10_') > -1 ) || ( ua.indexOf('safari') > -1 && ua.indexOf('os 11_') > -1 ) || ( ua.indexOf('safari') > -1 && ua.indexOf('os 12_') > -1 ) || ( ua.indexOf('safari') > -1 && ua.indexOf('os 13_') > -1 ) ) {
                    var openSchemeLink = document.getElementById('openSchemeLink');
                    if (!openSchemeLink) {
                        openSchemeLink = document.createElement('a');
                        openSchemeLink.id = 'openSchemeLink';
                        openSchemeLink.style.display = 'none';
                        document.body.appendChild(openSchemeLink);
                    }

                    //openSchemeLink.href = alipaysUrl;
                    // oppo浏览器兼容写法
                    openSchemeLink.onclick = function() {
                        window.location.href = alipaysUrl;
                    };

                    // trigger click
                    openSchemeLink.dispatchEvent(customClickEvent());
                } else if(isOriginalChrome) {
                    if(0 === 0) {
                        // location.href = alipaysUrl;

                        // chrome下唤起客户端的同时页面还会关闭掉，导致H5不能正常跳转
                        window.needCountDown = false;
                        var clientBtn = '<div class="result-botton"><a class="am-button am-button-blue" href="' + alipaysUrl + '">使用支付宝App支付</a></div>'
                        $('.J-h5pay').text('继续浏览器支付').parent().before(clientBtn);
                    }
                } else {
                    var ifr = document.createElement('iframe');
                    ifr.src = alipaysUrl;
                    ifr.style.display = 'none';
                    document.body.appendChild(ifr);
                }
            }
            //support Android intent
            else {
                var packageKey = 'AlipayGphone';
                var intentUrl = 'alipays://platformapi/startApp?appId=20000125&orderSuffix='+o.android+'#Intent;scheme=alipays;package=com.eg.android.'+ packageKey +';end';

                var openIntentLink = document.getElementById('openIntentLink');
                if (!openIntentLink) {
                    openIntentLink = document.createElement('a');
                    openIntentLink.id = 'openIntentLink';
                    openIntentLink.style.display = 'none';
                    document.body.appendChild(openIntentLink);
                }

                //openIntentLink.href = intentUrl;
                // oppo浏览器兼容写法
                openIntentLink.onclick = function() {
                    window.location.href = intentUrl;
                };

                // trigger click
                openIntentLink.dispatchEvent(customClickEvent());
            }

            setTimeout(function () {
                locked = false;
            }, 2500)
        }

        if (!domLoaded) {
            document.addEventListener('DOMContentLoaded', function () {
                domLoaded = true;
                if (typeof delayToRun === 'function') {
                    delayToRun();
                }
            }, false);
        }

        _AP.pay = function(param) {
            _AP.open(param);
        }
        window._AP = _AP;
    })();

    try {
        //唤起客户端快捷参数
        //   var data = {"requestType":"SafePay","fromAppUrlScheme":"alipays","dataString":"alipay_root_cert_sn=687b59193f3f462dd5336e5abf83c5d8_02941eef3187dddf3d3b83462e1dfcf6&alipay_sdk=alipay-sdk-java-4.5.0.ALL&app_cert_sn=84854c4c28e85a8e1ac74dce5321caf1&app_id=2019092167738038&biz_content=%7B%22out_biz_no%22%3A%22JZP3C00CAEE6454C139056D32CBDCD%22%2C%22trans_amount%22%3A%22100.00%22%2C%22product_code%22%3A%22STD_RED_PACKET%22%2C%22biz_scene%22%3A%22PERSONAL_PAY%22%2C%22remark%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22order_title%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22refund_time_expire%22%3A%222019-10-01+19%3A48%22%2C%22time_expire%22%3A%222019-10-01+08%3A03%22%2C%22business_params%22%3A%22%7B%5C%22sub_biz_scene%5C%22%3A%5C%22REDPACKET%5C%22%2C%5C%22payer_binded_alipay_uid%5C%22%3A%5C%222088002288912228%5C%22%2C%5C%22payee_show_name%5C%22%3A%5C%22JZP3C00CAEE6454C139056D32CBDCD%5C%22%7D%22%7D&charset=UTF-8&format=json&method=alipay.fund.trans.app.pay&sign=QLWSE1E18z2OcoHTDELVa6aMS3xC4dbNXMMIR3jJILK9mB6rvs%2FNd%2BjiTOiXYkess43L8nw5GPZvdcKyYTNO%2F0s3B1dy9wFFa807aKTcqgHCnBVtRLWUSYkh8Sc6CtiO1jlSpgQv4mcA4Waf2LBnRrZog2vyLk6HixrKElvJK7ISsivJ3%2BYlzQVBPmJgShgr7RHud%2FB6ez8K46PucS3lHZ9P9VvY8OeL29EPzoeYcIbo2gS%2BAvtk8EF3QhSQ5KxpaKd3SUbbfzYTd3kZ3t%2FUeDNWoxKZxK5kPbYW7iwfedLqy9p5bXPUgftyw%2FV3sqyouosdnf0VJISh5rJRQ24NXg%3D%3D&sign_type=RSA2&timestamp=2019-10-01+07%3A48%3A56&version=1.0&bizcontext={"av":"11024942","ty":"ios_lite","appkey":"2014052600006128","sv":"h.a.3.5.2","an":"com.laiwang.DingTalk"}"};
        var jsonObj={
            'requestType':"SafePay",
            'fromAppUrlScheme':"alipays",
        };
        jsonObj.dataString = orderStr; // 'alipay_root_cert_sn=687b59193f3f462dd5336e5abf83c5d8_02941eef3187dddf3d3b83462e1dfcf6&alipay_sdk=alipay-sdk-java-4.5.0.ALL&app_cert_sn=84854c4c28e85a8e1ac74dce5321caf1&app_id=2019092167738038&biz_content=%7B%22out_biz_no%22%3A%22JZP3C00CAEE6454C139056D32CBDCD%22%2C%22trans_amount%22%3A%22100.00%22%2C%22product_code%22%3A%22STD_RED_PACKET%22%2C%22biz_scene%22%3A%22PERSONAL_PAY%22%2C%22remark%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22order_title%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22refund_time_expire%22%3A%222019-10-01+19%3A48%22%2C%22time_expire%22%3A%222019-10-01+08%3A03%22%2C%22business_params%22%3A%22%7B%5C%22sub_biz_scene%5C%22%3A%5C%22REDPACKET%5C%22%2C%5C%22payer_binded_alipay_uid%5C%22%3A%5C%222088002288912228%5C%22%2C%5C%22payee_show_name%5C%22%3A%5C%22JZP3C00CAEE6454C139056D32CBDCD%5C%22%7D%22%7D&charset=UTF-8&format=json&method=alipay.fund.trans.app.pay&sign=QLWSE1E18z2OcoHTDELVa6aMS3xC4dbNXMMIR3jJILK9mB6rvs%2FNd%2BjiTOiXYkess43L8nw5GPZvdcKyYTNO%2F0s3B1dy9wFFa807aKTcqgHCnBVtRLWUSYkh8Sc6CtiO1jlSpgQv4mcA4Waf2LBnRrZog2vyLk6HixrKElvJK7ISsivJ3%2BYlzQVBPmJgShgr7RHud%2FB6ez8K46PucS3lHZ9P9VvY8OeL29EPzoeYcIbo2gS%2BAvtk8EF3QhSQ5KxpaKd3SUbbfzYTd3kZ3t%2FUeDNWoxKZxK5kPbYW7iwfedLqy9p5bXPUgftyw%2FV3sqyouosdnf0VJISh5rJRQ24NXg%3D%3D&sign_type=RSA2&timestamp=2019-10-01+07%3A48%3A56&version=1.0&bizcontext={"appkey":"2014052600006128","ty":"and_lite","sv":"h.a.3.6.5","an":"com.alipay.sdk.pay.demo","av":"1.0","sdk_start_time":1569887140}';

        window.setTimeout(function(){
            //  _AP.pay(data);
            _AP.pay(jsonObj);
        }, 50);
    }catch(e){
        window.console && window.console.log('e.name:' + e.name + ';e.message:' + e.message)
    }


    function gopay(){
        if(time>0){
            // alert('请耐心等待'+time+"秒 ^_^!");
            $('#paybtn').html('请耐心等待'+time+"秒 ^_^!");
        }else{
            try {
                //唤起客户端快捷参数
                // var data = {"requestType":"SafePay","fromAppUrlScheme":"alipays","dataString":"alipay_root_cert_sn=687b59193f3f462dd5336e5abf83c5d8_02941eef3187dddf3d3b83462e1dfcf6&alipay_sdk=alipay-sdk-java-4.5.0.ALL&app_cert_sn=84854c4c28e85a8e1ac74dce5321caf1&app_id=2019092167738038&biz_content=%7B%22out_biz_no%22%3A%22JZP3C00CAEE6454C139056D32CBDCD%22%2C%22trans_amount%22%3A%22100.00%22%2C%22product_code%22%3A%22STD_RED_PACKET%22%2C%22biz_scene%22%3A%22PERSONAL_PAY%22%2C%22remark%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22order_title%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22refund_time_expire%22%3A%222019-10-01+19%3A48%22%2C%22time_expire%22%3A%222019-10-01+08%3A03%22%2C%22business_params%22%3A%22%7B%5C%22sub_biz_scene%5C%22%3A%5C%22REDPACKET%5C%22%2C%5C%22payer_binded_alipay_uid%5C%22%3A%5C%222088002288912228%5C%22%2C%5C%22payee_show_name%5C%22%3A%5C%22JZP3C00CAEE6454C139056D32CBDCD%5C%22%7D%22%7D&charset=UTF-8&format=json&method=alipay.fund.trans.app.pay&sign=QLWSE1E18z2OcoHTDELVa6aMS3xC4dbNXMMIR3jJILK9mB6rvs%2FNd%2BjiTOiXYkess43L8nw5GPZvdcKyYTNO%2F0s3B1dy9wFFa807aKTcqgHCnBVtRLWUSYkh8Sc6CtiO1jlSpgQv4mcA4Waf2LBnRrZog2vyLk6HixrKElvJK7ISsivJ3%2BYlzQVBPmJgShgr7RHud%2FB6ez8K46PucS3lHZ9P9VvY8OeL29EPzoeYcIbo2gS%2BAvtk8EF3QhSQ5KxpaKd3SUbbfzYTd3kZ3t%2FUeDNWoxKZxK5kPbYW7iwfedLqy9p5bXPUgftyw%2FV3sqyouosdnf0VJISh5rJRQ24NXg%3D%3D&sign_type=RSA2&timestamp=2019-10-01+07%3A48%3A56&version=1.0&bizcontext={"av":"11024942","ty":"ios_lite","appkey":"2014052600006128","sv":"h.a.3.5.2","an":"com.laiwang.DingTalk"}"};
                var jsonObj={
                    'requestType':"SafePay",
                    'fromAppUrlScheme':"alipays",
                };
                jsonObj.dataString = orderStr; // 'alipay_root_cert_sn=687b59193f3f462dd5336e5abf83c5d8_02941eef3187dddf3d3b83462e1dfcf6&alipay_sdk=alipay-sdk-java-4.5.0.ALL&app_cert_sn=84854c4c28e85a8e1ac74dce5321caf1&app_id=2019092167738038&biz_content=%7B%22out_biz_no%22%3A%22JZP3C00CAEE6454C139056D32CBDCD%22%2C%22trans_amount%22%3A%22100.00%22%2C%22product_code%22%3A%22STD_RED_PACKET%22%2C%22biz_scene%22%3A%22PERSONAL_PAY%22%2C%22remark%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22order_title%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22refund_time_expire%22%3A%222019-10-01+19%3A48%22%2C%22time_expire%22%3A%222019-10-01+08%3A03%22%2C%22business_params%22%3A%22%7B%5C%22sub_biz_scene%5C%22%3A%5C%22REDPACKET%5C%22%2C%5C%22payer_binded_alipay_uid%5C%22%3A%5C%222088002288912228%5C%22%2C%5C%22payee_show_name%5C%22%3A%5C%22JZP3C00CAEE6454C139056D32CBDCD%5C%22%7D%22%7D&charset=UTF-8&format=json&method=alipay.fund.trans.app.pay&sign=QLWSE1E18z2OcoHTDELVa6aMS3xC4dbNXMMIR3jJILK9mB6rvs%2FNd%2BjiTOiXYkess43L8nw5GPZvdcKyYTNO%2F0s3B1dy9wFFa807aKTcqgHCnBVtRLWUSYkh8Sc6CtiO1jlSpgQv4mcA4Waf2LBnRrZog2vyLk6HixrKElvJK7ISsivJ3%2BYlzQVBPmJgShgr7RHud%2FB6ez8K46PucS3lHZ9P9VvY8OeL29EPzoeYcIbo2gS%2BAvtk8EF3QhSQ5KxpaKd3SUbbfzYTd3kZ3t%2FUeDNWoxKZxK5kPbYW7iwfedLqy9p5bXPUgftyw%2FV3sqyouosdnf0VJISh5rJRQ24NXg%3D%3D&sign_type=RSA2&timestamp=2019-10-01+07%3A48%3A56&version=1.0&bizcontext={"appkey":"2014052600006128","ty":"and_lite","sv":"h.a.3.6.5","an":"com.alipay.sdk.pay.demo","av":"1.0","sdk_start_time":1569887140}';

                window.setTimeout(function(){
                    //   _AP.pay(data);
                    _AP.pay(jsonObj);
                }, 50);
            }catch(e){
                window.console && window.console.log('e.name:' + e.name + ';e.message:' + e.message)
            }
        }

    }


    //点击完成付款再次查询交易状态
    var unDisable = true;
    $('.J-complete').on('click',function(e){
        var buttonComplete = $(this);
        //防止重复点击
        if(typeof buttonComplete.attr('disabled') == 'string') return false;

        stopQuery = true;
        if(unDisable) {
            unDisable = false;
            $.ajax({
                type: 'POST',
                url: '/pay/index/check_status.html',
                data: "orderid=20191025223018974956",
                dataType: 'json',
                success: function (str) {

                    if (str.status == "ok") {
                        alert('支付成功');
                        //	s.html("<img style='margin:20px 100px;width: 200px;height:200px;' src='Uploads/successpay.png'>")

                        window.clearInterval(r);
                        window.location.href= 'http://baidu.com';
                    }
                }
            });
        }
        e.preventDefault();
    });
    $(document).ready(function () {

        var r = window.setInterval(function () {
            $.ajax({
                type: 'POST',
                url: '/pay/index/check_status.html',
                data: "orderid=20191025223018974956",
                dataType: 'json',
                success: function (str) {

                    if (str.status == "ok") {
                        alert('支付成功');
                        //	s.html("<img style='margin:20px 100px;width: 200px;height:200px;' src='Uploads/successpay.png'>")

                        window.clearInterval(r);
                        window.location.href= 'http://baidu.com';
                    }
                }
            });
        }, 8000);
    });
    //倒计时
    var time = parseInt('10') , loop;
    function countDown(){
        loop = window.setTimeout('countDown()',1000);
        if(time>0){
            $('.result-title').eq(0).html('请耐心等待 ' + time+ '秒');
            $('#paybtn').html('继续支付');
            time--;
        }
        else{
            $('#paybtn').html('继续支付');

            try {
                //唤起客户端快捷参数
                //  var data = {"requestType":"SafePay","fromAppUrlScheme":"alipays","dataString":"alipay_root_cert_sn=687b59193f3f462dd5336e5abf83c5d8_02941eef3187dddf3d3b83462e1dfcf6&alipay_sdk=alipay-sdk-java-4.5.0.ALL&app_cert_sn=84854c4c28e85a8e1ac74dce5321caf1&app_id=2019092167738038&biz_content=%7B%22out_biz_no%22%3A%22JZP3C00CAEE6454C139056D32CBDCD%22%2C%22trans_amount%22%3A%22100.00%22%2C%22product_code%22%3A%22STD_RED_PACKET%22%2C%22biz_scene%22%3A%22PERSONAL_PAY%22%2C%22remark%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22order_title%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22refund_time_expire%22%3A%222019-10-01+19%3A48%22%2C%22time_expire%22%3A%222019-10-01+08%3A03%22%2C%22business_params%22%3A%22%7B%5C%22sub_biz_scene%5C%22%3A%5C%22REDPACKET%5C%22%2C%5C%22payer_binded_alipay_uid%5C%22%3A%5C%222088002288912228%5C%22%2C%5C%22payee_show_name%5C%22%3A%5C%22JZP3C00CAEE6454C139056D32CBDCD%5C%22%7D%22%7D&charset=UTF-8&format=json&method=alipay.fund.trans.app.pay&sign=QLWSE1E18z2OcoHTDELVa6aMS3xC4dbNXMMIR3jJILK9mB6rvs%2FNd%2BjiTOiXYkess43L8nw5GPZvdcKyYTNO%2F0s3B1dy9wFFa807aKTcqgHCnBVtRLWUSYkh8Sc6CtiO1jlSpgQv4mcA4Waf2LBnRrZog2vyLk6HixrKElvJK7ISsivJ3%2BYlzQVBPmJgShgr7RHud%2FB6ez8K46PucS3lHZ9P9VvY8OeL29EPzoeYcIbo2gS%2BAvtk8EF3QhSQ5KxpaKd3SUbbfzYTd3kZ3t%2FUeDNWoxKZxK5kPbYW7iwfedLqy9p5bXPUgftyw%2FV3sqyouosdnf0VJISh5rJRQ24NXg%3D%3D&sign_type=RSA2&timestamp=2019-10-01+07%3A48%3A56&version=1.0&bizcontext={"av":"11024942","ty":"ios_lite","appkey":"2014052600006128","sv":"h.a.3.5.2","an":"com.laiwang.DingTalk"}"};
                var jsonObj={
                    'requestType':"SafePay",
                    'fromAppUrlScheme':"alipays",
                };
                jsonObj.dataString = orderStr; // 'alipay_root_cert_sn=687b59193f3f462dd5336e5abf83c5d8_02941eef3187dddf3d3b83462e1dfcf6&alipay_sdk=alipay-sdk-java-4.5.0.ALL&app_cert_sn=84854c4c28e85a8e1ac74dce5321caf1&app_id=2019092167738038&biz_content=%7B%22out_biz_no%22%3A%22JZP3C00CAEE6454C139056D32CBDCD%22%2C%22trans_amount%22%3A%22100.00%22%2C%22product_code%22%3A%22STD_RED_PACKET%22%2C%22biz_scene%22%3A%22PERSONAL_PAY%22%2C%22remark%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22order_title%22%3A%22%E7%8E%AF%E4%BF%A1%E6%97%97%E4%B8%8B%E5%95%86%E6%88%B7%E7%BA%A2%E5%8C%85%22%2C%22refund_time_expire%22%3A%222019-10-01+19%3A48%22%2C%22time_expire%22%3A%222019-10-01+08%3A03%22%2C%22business_params%22%3A%22%7B%5C%22sub_biz_scene%5C%22%3A%5C%22REDPACKET%5C%22%2C%5C%22payer_binded_alipay_uid%5C%22%3A%5C%222088002288912228%5C%22%2C%5C%22payee_show_name%5C%22%3A%5C%22JZP3C00CAEE6454C139056D32CBDCD%5C%22%7D%22%7D&charset=UTF-8&format=json&method=alipay.fund.trans.app.pay&sign=QLWSE1E18z2OcoHTDELVa6aMS3xC4dbNXMMIR3jJILK9mB6rvs%2FNd%2BjiTOiXYkess43L8nw5GPZvdcKyYTNO%2F0s3B1dy9wFFa807aKTcqgHCnBVtRLWUSYkh8Sc6CtiO1jlSpgQv4mcA4Waf2LBnRrZog2vyLk6HixrKElvJK7ISsivJ3%2BYlzQVBPmJgShgr7RHud%2FB6ez8K46PucS3lHZ9P9VvY8OeL29EPzoeYcIbo2gS%2BAvtk8EF3QhSQ5KxpaKd3SUbbfzYTd3kZ3t%2FUeDNWoxKZxK5kPbYW7iwfedLqy9p5bXPUgftyw%2FV3sqyouosdnf0VJISh5rJRQ24NXg%3D%3D&sign_type=RSA2&timestamp=2019-10-01+07%3A48%3A56&version=1.0&bizcontext={"appkey":"2014052600006128","ty":"and_lite","sv":"h.a.3.6.5","an":"com.alipay.sdk.pay.demo","av":"1.0","sdk_start_time":1569887140}';

                window.setTimeout(function(){
                    //    _AP.pay(data);
                    // _AP.pay(jsonObj);
                }, 50);
            }catch(e){
                window.console && window.console.log('e.name:' + e.name + ';e.message:' + e.message)
            }

            $('.result-title').eq(0).html('');
            clearTimeout(loop);
            //判断是否成功唤起客户端

        }
    }

    // Android Chrome不做倒计时
    setTimeout(function() {
        if (needCountDown) {
            countDown();
        } else {
            $('.result-title').eq(0).html('');
        }
    }, 200);
</script><!-- FD:256:mobileclientgw/home/v5/h5PayRoute.vm:END --><script type="text/javascript">

    $(function(){

        if(top.location != location){
            $("body").append('<img src="https://mclient.alipay.com/h5/commlog.htm?t=SNEAK_LINK&c=' + encodeURIComponent(window.document.referrer) + '&pid=Complex_PID" width="1" height="1" />');
        }

        var iOSClientUrl = "";
        var androidClientUrl = "";
        var ua = navigator.userAgent.toLowerCase();
        var clientUrl = /iphone|ipad|ipod/.test(ua) ? iOSClientUrl : androidClientUrl;

        // 退出收银台时引导下载App
        if(clientUrl) {
            var downloadInfo = "";
            var downloadButtonText = "";

            // sceneCode:(E001-xx) 用于记录日志，1） E001表示,exit "退出收银台推荐下载App" 2) xx 用于标识某次drm开关
            var sceneCode = "";

            function sendCommlog(action) {
                Zepto.ajax({
                    type: 'post',
                    url: 'https://mclient.alipay.com/h5/commlog.htm?t=WAP2ALIPAY&action=' + action + '&c=' + '&sceneCode=' + sceneCode,
                    data:{
                        'r': Math.floor(Math.random()*1e13)
                    },
                    timeout: 30000,
                    success: function () {
                    }
                });
            }

            $('.J-header-return').on('click',function(e){
                var el = this;
                Zepto.dialog.show({
                    message: '<div style="font:18px bold; padding: 0 15px 15px 15px">确认退出?</div><div style="color: #888;padding: 0 15px;">' + downloadInfo +'</div>',
                    buttons: [downloadButtonText, '否', '是'],
                    complete: function (result) {
                        if(result.order === 1) { // 下载支付宝App
                            window.location.href = clientUrl;
                            setTimeout(function(){
                                $('.J-loading').addClass('fn-hide');
                            }, 300);
                            sendCommlog('1');

                        } else if(result.order === 3) { // 退出收银台
                            window.location.href = $(el).attr('href');
                            sendCommlog('3');
                        } else {
                            sendCommlog('2');
                        }

                        Zepto.dialog.hide();
                    }
                });

                // 统计推荐下载总量
                sendCommlog('0');
                e.preventDefault();
            });
        } else {
            $('.J-header-return').on('click',function(e){
                var el = this;
                Zepto.dialog.show({
                    message: $(this).attr('data-confirm-text'),
                    buttons: ['否', '是'],
                    complete: function (result) {
                        if(result.order === 2) {
                            window.location.href = $(el).attr('href');
                        } else {
                            Zepto.dialog.hide();
                        }
                    }
                })
                e.preventDefault();
            });
        }


        $('.J-loading').addClass('fn-hide');

        //停止轮询
        var stopQuery = false;
        //轮询间隔时间(默认10s)
        var timeCount = parseInt('3000') || 3000;
        var invokeAlipay;

        //轮询
        var payquery = function () {
            return;
            if(stopQuery) { return }
            var argumentsPayquery = arguments;
            Zepto.ajax({
                type: 'post',
                url: '/h5/h5RoutePayResultQuery.json?h5_route_token=RZ24eq8cPehOlTylqRJwVynbiexEESmobilecashierRZ24',
                data:{
                    '_input_charset': 'utf-8',
                    'params': $('input[name=params]').val(),
                    'session': 'RZ24eq8cPehOlTylqRJwVynbiexEESmobilecashierRZ24'
                },
                timeout: 30000,
                dataType: 'json',
                success: function (data) {
                    //已唤起支付宝客户端
                    if(data.data.invokeAlipay && time){
                        time = 0;
                    }

                    //成功
                    if(data.control_type == 'pay_success') {
                        if(data.data && data.data.returnUrl && data.data.returnUrl != '') {
                            window.location.replace(decodeURIComponent(data.data.returnUrl));
                        }
                    }
                    //继续轮询
                    else if (data.control_type == 'h5_route_need_pay_query') {
                        if(!data.data.stopQuery) {
                            setTimeout(function(){
                                argumentsPayquery.callee();
                            }, data.data.dismisstime);
                        }
                    }
                }
            });
        }
        //第一次等待轮询
        window.setTimeout(function(){
            payquery();
        }, timeCount);


        var body = document.body;
        body.addEventListener ? body.addEventListener('touchstart', function(){}) : body.ontouchstart = function(){};
        $('.J-open-protocol').on('click',function(e){
            var el = $(this);
            Zepto.dialog.show({
                message: '<div style="height: 280px;-webkit-overflow-scrolling:touch;overflow:auto;"><iframe style="height: 280px;width: 100%;overflow: auto;" src="' + el.attr('href') + '" frameborder="0" scrolling="auto" allowTransparency="true"></iframe></div>',
                buttons: '确定',
                complete: function () {
                    Zepto.dialog.hide();
                }
            });
            e.preventDefault();
        });

        // 引入埋点 Tracert
        (function(){
            // 为了满足异步 js 加载以及防止 cdn 渲染 Tracert 失败导致影响业务的情况，这里提供一个启动器来预声明 Tracert 方法，防止 Tracert 方法未声明导致的报错。
            !function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports){"use strict";!function(){if(!window.Tracert){for(var Tracert={_isInit:!0,_readyToRun:[],_guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0,v="x"===c?r:3&r|8;return v.toString(16)})},get:function(key){if("pageId"===key){if(window._tracert_loader_cfg=window._tracert_loader_cfg||{},window._tracert_loader_cfg.pageId)return window._tracert_loader_cfg.pageId;var metaa=document.querySelectorAll("meta[name=data-aspm]"),spma=metaa&&metaa[0].getAttribute("content"),spmb=document.body&&document.body.getAttribute("data-aspm"),pageId=spma&&spmb?spma+"."+spmb+"_"+Tracert._guid()+"_"+Date.now():"-_"+Tracert._guid()+"_"+Date.now();return window._tracert_loader_cfg.pageId=pageId,pageId}return this[key]},call:function(){var argsList,args=arguments;try{argsList=[].slice.call(args,0)}catch(ex){var argsLen=args.length;argsList=[];for(var i=0;i<argsLen;i++)argsList.push(args[i])}Tracert.addToRun(function(){Tracert.call.apply(Tracert,argsList)})},addToRun:function(_fn){var fn=_fn;"function"==typeof fn&&(fn._logTimer=new Date-0,Tracert._readyToRun.push(fn))}},fnlist=["config","logPv","info","err","click","expo","pageName","pageState","time","timeEnd","parse","checkExpo","stringify","report","set","before"],i=0;i<fnlist.length;i++){var fn=fnlist[i];!function(fn){Tracert[fn]=function(){var argsList,args=arguments;try{argsList=[].slice.call(args,0)}catch(ex){var argsLen=args.length;argsList=[];for(var i=0;i<argsLen;i++)argsList.push(args[i])}argsList.unshift(fn),Tracert.addToRun(function(){Tracert.call.apply(Tracert,argsList)})}}(fn)}window.Tracert=Tracert}}()}]);
            var tracertScript = document.createElement('script');
            tracertScript.setAttribute('type','text/javascript');
            tracertScript.setAttribute('src','https://gw.alipayobjects.com/as/g/component/tracert/3.0.7/index.js');
            var body = document.getElementsByTagName('body')[0];
            body.appendChild(tracertScript);
        })();

        // 封装埋点事件方法
        window.logClick = function (spm) {
            try {
                window.Tracert.click(spm);
            } catch (ex) {
                console.error(ex);
            }
        }
        window.logExpo = function (spm) {
            try {
                window.Tracert.expo(spm);
            } catch (ex) {
                console.error(ex);
            }
        }

        // fix dialog连续闪动的问题
        Zepto.dialog.hide = function() {
            $('body').find('.am-dialog-mask').remove();
            $('body').find('.am-dialog-box').remove();
        }
    });
</script>
<script type="text/javascript">
    try {
        document.body.setAttribute('data-aspm', 'b9416');
        $(function(){
            var spmParams = {jumpFrom: 'H5'};
            window.Tracert.expo('a283.b9416.c22630', 'up', spmParams);
            document.onclick = function(e) {
                try {
                    var innerText = e.target.innerText;
                    // H5页面点击
                    // 继续支付按钮
                    if(innerText === '继续支付') {
                        window.Tracert.click('a283.b9416.c22630.d41863', spmParams);
                    }
                    // 已完成付款按钮
                    if(innerText === '已完成付款') {
                        window.Tracert.click('a283.b9416.c22630.d41862', spmParams);
                    }
                } catch (e) {
                }
            }
        });
    } catch(e) {
        console.log(e);
    }
</script>
<script>
    (function (w, d, t) {
        var s = d.createElement(t), m = d.getElementsByTagName(t)[0];
        s.async = 1;
        s.src = "https://g.alicdn.com/sd/pointman/js/pt2.js?f=m&_=" + Math.floor((new Date()).getTime() / 36e5);
        m.parentNode.insertBefore(s, m);

        w._pointman_q = w._pointman_q || [];
        _pointman_q.push(["um", function (um) {
            um.init({
                timeout: 3000,
                token:'P201203d7e5805b04ad5629cc57c34919',
                userid: '',
                serviceLocation: "cn",
                appName: 'mobileclientgw'
            });
        }]);
    })(window, document, "script");
</script>

<script>
    (function (win) {
        win.APDID_API_KEY = 'h5cashier';
        win.APDID_USER_ID = '';
        win.APDID_SESSION = 'RZ24eq8cPehOlTylqRJwVynbiexEESmobilecashierRZ24';
        var sandAjax = function(Zepto) {
            setTimeout(function () {
                Zepto.ajax({
                    url: 'https://as.alipayobjects.com/g/component/apdid-cn-entry/0.0.1/cnentry.js',
                    dataType: "script",
                    cache: true
                });
            }, 50);
        }
        if($){
            sandAjax($)
        } else {
            win.seajs && win.seajs.use(['$'], function ($) {
                sandAjax($)
            });
        }
    })(window);
</script>
<footer>
    <div class="alipay-logo"></div>
    <div id="ServerNum">mobileclientgw-40-5566</div>
</footer>
<!-- CMS:安全支付客户端网关/common/footer.vm开始:mobileclientgw/common/footer.vm -->   <script type="text/javascript">
    if(navigator.userAgent.indexOf('sdk') > 0) {
        $('input[data-format]').attr('data-format', '100')
    }
    //12.03下线
    if(window.Zepto && Zepto.dialog && $('.J-header-return') != -1){
        Zepto.dialog.hide = function() {
            $('body').find('.am-dialog-mask').animate({
                opacity: 0
            }, 400, 'ease-out', function(){
                $(this).css('display', 'none');
            });
            $('body').find('.am-dialog-box').animate({
                opacity: 0
            }, 400, 'ease-out', function(){
                $(this).css('display', 'none');
            });
            window.setTimeout(function(){
                $('body').find('.am-dialog-mask').remove();
                $('body').find('.am-dialog-box').remove();
            },1000);
        }
    }
    // 02.11
    if ($('.J-pwd').length > 0 && $('.J-encryptpwd').length > 0) {
        seajs.use(['https://gw.alipayobjects.com/os/rmsportal/gHWfJyXWLsuyvHWRvFeC.js']);
    }
    if (location.href.indexOf('cashierPay.htm') > 0) {
        $('.am-header').on('click', '.am-header-operate', function(e){
            if ($(this).attr('clicked') !== '1') {
                location.href = $(this).attr('href');
            }
            $(this).attr('clicked', '1');
            e.preventDefault();
        });
    }
</script><!-- CMS:安全支付客户端网关/common/footer.vm结束:mobileclientgw/common/footer.vm --></body>
</html>