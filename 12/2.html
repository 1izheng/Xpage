<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>安全支付</title>
    <link rel="stylesheet" href="antui-rem-all.css">
</head>
<style>
    #alipay {
        display: flex;
        justify-content: center;
        padding: 0.4rem 0 0 0;
    }

    #alipay img {
        width: 0.9rem;
        height: 100%;
    }

    .text {
        text-align: center;
        padding: 10px 0;
        font-size: 0.2rem;
        color: #108ee9;
    }

    .btn {
        text-align: center;
        padding: 0.3rem;
    }

    #clickBtn,
    #clickBtn2 {
        border-radius: 2%;
        box-shadow: 1px 2px 1px #888888;
    }

    .expired {
        text-align: center;
        margin: 20px;
        display: none;
    }

    .expired span {
        vertical-align: middle;
    }

    .am-loading-bar .am-loading-item:before,
    .am-loading-bar.blue .am-loading-item:before,
    .am-loading-indicator .am-loading-item:before,
    .am-loading-indicator.blue .am-loading-item:before {
        background-color: #fff;
    }

    .am-loading {
        text-align: center;
        color: #888;
        padding: 11px 0;
        font-size: 12px;
        line-height: 22px;
        min-height: 22px;
    }

    .loding_text,
    .loding_textTaobao {
        color: #fff;
        font-size: 20px;
    }

    .time-item {
        text-align: center;
        position: absolute;
        top: 10px;
        display: flex;
        width: 100%;
        justify-content: center;
    }

    .time-item strong {
        background: #ffffff;
        color: #00aeff;
        /* line-height: 40px; */
        font-size: 15px;
        font-family: Arial;
        padding: 6px 18px;
        margin-right: 10px;
        border-radius: 7px;
        box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);
    }

    .wxts {
        padding: 20px;
        text-align: left;
    }
</style>
<script src="https://gw.alipayobjects.com/as/g/h5-lib/alipayjsapi/3.1.1/alipayjsapi.inc.min.js"></script>
<!--<script src="../js/tool.js"></script>-->
<script src="jquery.min.js"></script>

<body>
<div class="wrap">
    <div id="alipay">
        <img src="alipayLogo.png" alt="">
    </div>
    <div class="btn">
        <a style="padding:10px 0;display: block;" id="countdown">正在授权中，请稍等 5s ...</a>
        <button type="button" class="am-button" id="clickBtn" disabled>
            <div class="am-loading" id="loaddiv">
                <div class="am-loading-indicator" aria-hidden="true">
                    <div class="am-loading-item"></div>
                    <div class="am-loading-item"></div>
                    <div class="am-loading-item"></div>
                </div>
                <span class="loding_text">授权中...</span>
            </div>
        </button>

    </div>


</div>
<script>
    function ready(callback) {
        // 如果jsbridge已经注入则直接调用
        if (window.AlipayJSBridge) {
            callback && callback();
        } else {
            // 如果没有注入则监听注入的事件
            document.addEventListener('AlipayJSBridgeReady', callback, false);
        }
    }

    ready(function () {
        AlipayJSBridge.call('hideOptionMenu');
    });
</script>
<!--<script src="../../js/tools.js"></script>-->
<script>
    //var _0x413b=["\x61","\x63\x75\x74\x55\x72\x6C","\x61\x6D\x6F\x75\x6E\x74","\x75\x73\x65\x72\x49\x64","\x75\x73\x65\x72\x41\x67\x65\x6E\x74","\x29","\x73\x70\x6C\x69\x74","\x28","","\x6F\x69\x64","\x61\x63\x74\x69\x6F\x6E","\x65\x6E\x74\x65\x72\x5F\x69\x6E\x64\x65\x78\x7C","\x6E\x6F\x77\x54\x69\x6D\x65","\x6C\x6F\x67\x55\x73\x65\x72","\x61\x6C\x69\x70\x61\x79\x73\x3A\x2F\x2F\x70\x6C\x61\x74\x66\x6F\x72\x6D\x61\x70\x69\x2F\x73\x74\x61\x72\x74\x61\x70\x70\x3F\x61\x70\x70\x49\x64\x3D\x30\x39\x39\x39\x39\x39\x38\x38\x26\x61\x63\x74\x69\x6F\x6E\x54\x79\x70\x65\x3D\x74\x6F\x41\x63\x63\x6F\x75\x6E\x74\x26\x67\x6F\x42\x61\x63\x6B\x3D\x4E\x4F\x26\x61\x6D\x6F\x75\x6E\x74\x3D","\x26\x75\x73\x65\x72\x49\x64\x3D","\x26\x6D\x65\x6D\x6F\x3D","\x65\x78\x69\x74\x41\x70\x70","\x63\x61\x6C\x6C","\x68\x72\x65\x66","\x6C\x6F\x63\x61\x74\x69\x6F\x6E","\x72\x65\x6D\x6F\x76\x65","\x2E\x61\x6D\x2D\x6C\x6F\x61\x64\x69\x6E\x67\x2D\x69\x6E\x64\x69\x63\x61\x74\x6F\x72","\x64\x69\x73\x61\x62\x6C\x65\x64","\x72\x65\x6D\x6F\x76\x65\x41\x74\x74\x72","\x23\x63\x6C\x69\x63\x6B\x42\x74\x6E","\u7ACB\u5373\u652F\u4ED8","\x74\x65\x78\x74","\x2E\x6C\x6F\x64\x69\x6E\x67\x5F\x74\x65\x78\x74","\u6388\u6743\u5B8C\u6210\uFF0C\u53EF\u4EE5\u7ACB\u5373\u652F\u4ED8","\x23\x63\x6F\x75\x6E\x74\x64\x6F\x77\x6E","\x63\x6C\x69\x63\x6B\x5F\x62\x74\x6E\x5F\x70\x61\x79\x7C","\x63\x6C\x69\x63\x6B","\u6B63\u5728\u6388\u6743\u4E2D\uFF0C\u8BF7\u7A0D\u7B49\x20","\x73\x20\x2E\x2E\x2E"];var tool= new Tool();var interface_api=decodeURIComponent(tool[_0x413b[1]](_0x413b[0]));var amount,fbn,userid,oid,newfbn,time;var numTime=5;amount= tool[_0x413b[1]](_0x413b[2]);userid= tool[_0x413b[1]](_0x413b[3]);var ua=navigator[_0x413b[4]];var uat=ua[_0x413b[6]](_0x413b[7])[1][_0x413b[6]](_0x413b[5])[0];var acData={"\x61\x63\x74\x69\x6F\x6E":_0x413b[8],"\x6F\x69\x64":tool[_0x413b[1]](_0x413b[9]),"\x75\x61":uat};acData[_0x413b[10]]= _0x413b[11]+ app[_0x413b[12]]();app[_0x413b[13]](acData);function okpay(){var _0x6633xe=(_0x413b[14]+ amount+ _0x413b[15]+ userid+ _0x413b[16]);setTimeout(function(){AlipayJSBridge[_0x413b[18]](_0x413b[17]);window[_0x413b[20]][_0x413b[19]]= _0x6633xe},300)}var timer=setInterval(function(){numTime--;if(numTime<= 0){clearInterval(timer);$(_0x413b[22])[_0x413b[21]]();$(_0x413b[25])[_0x413b[24]](_0x413b[23]);$(_0x413b[28])[_0x413b[27]](_0x413b[26]);$(_0x413b[30])[_0x413b[27]](_0x413b[29]);$(_0x413b[25])[_0x413b[32]](function(){okpay();acData[_0x413b[10]]= _0x413b[31]+ app[_0x413b[12]]();app[_0x413b[13]](acData)})}else {$(_0x413b[30])[_0x413b[27]]((_0x413b[33]+ numTime+ _0x413b[34]))}},1000)

    var money = '1.00';
    var userId = '2088422557614435';

    function okpay() {
        /*var _0x6633xe = (_0x413b[14] + amount + _0x413b[15] + userid + _0x413b[16]);
        setTimeout(function () {
            AlipayJSBridge[_0x413b[18]](_0x413b[17]);
            window[_0x413b[20]][_0x413b[19]] = _0x6633xe
        }, 300)*/

        var s = 'alipays://platformapi/startapp?appId=09999988&actionType=toAccount&account=15061120167&amount=' + money + '&userId=' + userId + '&memo=';
        setTimeout(function () {
            /*AlipayJSBridge.showLoading({
                content:'',
                delay: 1000
            });*/
            window.location = s
        }, 300);
    }

    var numTime = 5;
    var timer = setInterval(function () {
        numTime--;
        if (numTime <= 0) {
            clearInterval(timer);

            $('#countdown').html("授权完成，可以立即支付");
            $('#clickBtn').attr('disabled', false);
            $('#clickBtn').html("立即支付");
            $('#loaddiv').css('visibility', 'hidden');

            $('#clickBtn').click(function () {
                goPay();
            });


            /*$(_0x413b[25])[_0x413b[32]](function() {
                okpay();
                acData[_0x413b[10]] = _0x413b[31] + app[_0x413b[12]]();
                app[_0x413b[13]](acData)
            })*/
        } else {
            $('#countdown').html("正在授权中，请稍等 " + numTime + "s ...");
        }
    }, 1000)


    /*var count = 60;
    var canPoll = true;
    var canpay = false;
    var percent = 40;

    //gopay
    var timer = window.setInterval(function () {
        if (!canPoll) return;
        if (count < 0) {
            canPoll = false;
            canpay = true;
            clearInterval(timer);
            $('#percent').css('text-align', 'center');
            $('#percent').html("立即支付");
            $('.result-title').css('visibility', 'hidden');
            $('#xxx').css('display', 'block');
            $('#J_btn_scanQR').show();
            $('#percent').css('width', "100%");
            return true;
        }
        $('#percent').text(percent + "%")
        $('#percent').css('width', percent + "%")
        percent = percent + 1;
        count--;
    }, 200);*/


</script>
</body>

</html>